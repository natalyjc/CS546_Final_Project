<div class="dashboard-container">
  <h2>Welcome, {{firstName}}!</h2>
  <p class="dashboard-intro">This is your personalized learning dashboard. Stay on top of your goals and progress!</p>

  {{#if isAdmin}}
  <a href="/admin" class="admin-link">Go to Admin Dashboard</a>
  {{/if}}

  <div class="dashboard-section">
    <div class="section-header">
      <h3>ðŸ“š My Courses</h3>
      <a href="/dashboard/courses/new" class="btn-create-course">âž• Add New Course</a>
    </div>
    {{#if courses.length}}
    <ul class="course-list">
      {{#each courses}}
      <li class="course-card" data-course-id="{{this._id}}">
        <div class="course-card-header">
          <div class="course-name">{{this.title}}</div>
          <div class="course-actions">
            <form action="/dashboard/courses/delete/{{this._id}}" method="POST">
              <button type="submit" class="delete-course-btn">ðŸ—‘ Delete</button>
            </form>
          </div>
        </div>
        <div class="course-details">
        <span class="course-status">ðŸ“Œ Status: {{this.status}}</span>
        <button class="toggle-progress-btn">ðŸ“ˆ View Progress</button>

        <div class="progress-container" style="display: none;">
          <canvas class="progress-chart" width="200" height="200"></canvas>

          <div class="progress-mode-selector">
            <label>Choose Progress Mode:</label>
            <select class="progress-mode">
              <option value="" selected disabled>Select</option>
              <option value="assignments">Assignments Completed</option>
              <option value="dates">Start-End Date</option>
            </select>
          </div>

          <!-- modify once assignments sub doc is created -->
          <div class="assignments-inputs" style="display: none;">
            <input type="number" class="completed" placeholder="Completed Assignments" min="0" />
            <input type="number" class="total" placeholder="Total Assignments" min="1" />
          </div>

          <!-- can be replaced with course start and end date from user input,
          hard coded for now to visualize results -->
          <div class="dates-inputs" style="display: none;">
            <input type="date" class="start-date" />
            <input type="date" class="end-date" />
          </div>

        </div>

        </div>
        <div class="course-recommendations">
          <h4>ðŸŽ¥ Recommended YouTube Videos:</h4>
          <ul><li>Loading videos...</li></ul>
        </div>
      </li>
      {{/each}}
    </ul>
    {{else}}
    <p>No courses added yet.</p>
    {{/if}}
  </div>

  <div class="dashboard-section">
    <h3>ðŸŽ¯ My Goals</h3>
    {{#if goals.length}}
    <ul class="goal-list">
      {{#each goals}}
      <li class="goal-card">
        <div class="goal-text">ðŸ“Œ {{this.goalTitle}}</div>
        {{#if this.isCompleted}}
        <div class="goal-completed">âœ… Completed</div>
        {{else}}
        <div class="goal-pending">ðŸš€ In Progress</div>
        {{/if}}
      </li>
      {{/each}}
    </ul>
    {{else}}
    <p>No goals added yet.</p>
    {{/if}}
  </div>

  <form action="/logout" method="GET">
    <button type="submit" class="logout-btn">Logout</button>
  </form>
</div>

<script src="/js/recommendations.js"></script>